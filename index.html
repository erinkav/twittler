<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel=stylesheet href="stylesheet.css" type="text/css">
    <link href="css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body>
    <script>

      $(document).ready(function(){
         var $feed = $('#feed');
        $feed.html('');

        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $('<div></div>');
          $tweet.html('<p id="username" class="'+tweet.user+'"> @' + tweet.user + '</p><p id="tweet">: ' + tweet.message + '\n </p><p id="timestamp">Posted on: '+tweet.created_at+'</p>');
          $tweet.appendTo($feed);
          $tweet.data("user", tweet.user);
          index -= 1;
        }

        var $userFeed = $('#profile');
        $userFeed.html(''); 
        var userNum = users.length;
        while(userNum >= 0){
          var profile = users[userNum];
          var $profile = $('<div class="username"></div>');
          $profile.html(profile); 
          $profile.appendTo('#user-feeds'); 
          userNum = userNum -1;
        }

        var getAll = function(list) {
          var array=[];
          for(var i=0; i<list.length; i++) {
            for (list[i] in streams.users) {
              array.push(streams.users[list[i]]); 
            }
          }
          return array; 
        };

        var allUserInfo = $.makeArray(getAll(users));

        var $messageList = $('#messages');
        $messageList.html = ('');
        for(var i=0; i<allUserInfo.length; i++) {
          var entry = $.makeArray(allUserInfo[i]);
          for (var j=0; j<entry.length; j++) {
            var $entry = $('<div class="entry"></div>'); 
            $entry.html('<p id="username" class="'+entry[j].user +'"> @'+entry[j].user+' posted '+entry[j].created_at+": "+entry[j].message+'</p>');
            $entry.data("user", entry[j].user);
            $entry.appendTo("#messages");
          }
        }

        $("button").on('click', function() { 
          generateRandomTweet(); 
          tweet = streams.home[streams.home.length-1];
          $tweet = $('<div></div>');
          $tweet.html('<p id="username" class="'+tweet.user+'""> @' + tweet.user + '</p><p id="tweet">: ' + tweet.message + '\n </p><p id="timestamp">Posted on: '+tweet.created_at+'</p>');
          $tweet.data("user", tweet.user);
          $tweet.prependTo($feed);
        }); 

        var show = document.getElementsById("#")
        $('#username').on('click', function() {
          $("#messages").toggle();
        });
        
        // $("#username").on('click', function () {
        //   if($("#username").data("user") === "shawndrost") {
        //     $("#user-feeds").css("display", "in-line");
        //   }
        // });
      });
    </script>
    <div id="title" class="jumbotron">
      <h1>Twitter</h1>
      <button type='button' class="btn btn-lg btn-success">
        See Latest Tweets
      </button>
    </div>
    <div class = "col-sm-3"id="messages">
    </div>
    <div class='container'>
      <div id="feed" class="col-sm-8">
      </div>
      <div id="followers" class="col-sm-4">
        <h2 class="lead">Following</h2>
      </div>
      <div id="user-feeds">
      </div>
    </div>
  </body>
</html>
